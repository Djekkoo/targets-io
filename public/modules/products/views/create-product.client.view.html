<section data-ng-controller="ProductsController" data-ng-init="initCreateForm()">
    <div class="page-header">
        <h1>New Product</h1>
    </div>
    <div class="col-md-12">
        <form name="productForm">
            <div layout="column">
                <div layout="column">
                    <input type="hidden" data-ng-model="product._id" id="productId" value="{{product._id}}" class="form-control">
                    <md-input-container md-is-error="productForm.productName.$invalid && (productForm.$submitted || productForm.productName.$dirty)" flex>
                        <label>Product name</label>
                        <input name="productName" ng-model="product.name" record-availability-validator="/products" required>
                        <div ng-messages="productForm.productName.$error" ng-if="productForm.$submitted || productForm.productName.$touched">
                            <div ng-message="required">Product name is required.</div>
                            <div ng-message="recordLoading">Checking database...</div>
                            <div ng-message="recordAvailable">The product name already exists</div>
                        </div>
                    </md-input-container>
                    <md-input-container md-is-error="productForm.productDescription.$invalid && (productForm.$submitted || productForm.productDescription.$dirty)" flex>
                        <label>Product description</label>
                        <input name="productDescription" ng-model="product.description" required>
                        <div ng-messages="productForm.productDescription.$error" ng-if="productForm.$submitted || productForm.productDescription.$touched">
                            <div ng-message="required">Product description is required.</div>
                        </div>
                    </md-input-container>
                </div>
                <div layout="row">
                    <md-button md-no-ink class="md-primary" ng-click="productForm.$valid && create()" >Submit</md-button>
                    <md-button data-ng-click="cancel()" >Cancel</md-button>
                </div>
            </div>

        </form>
    </div>

</section>
