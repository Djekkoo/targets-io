<div ng-controller="GraphsController" data-ng-init="init()">
    <div data-ng-include="'modules/graphs/views/tag-filter-modal.client.view.html'"></div>
    <div fix-to-top="fix-to-top" class="graphs-header">
        <div layout="column">
            <!--<span>-->
            <div layout="row" flex>
                <md-checkbox ng-model="zoomLock" aria-label="Apply zoom to all graphs">
                    Apply zoom to all graphs
                </md-checkbox>
                <md-button md-no-ink class="md-primary" data-ng-click="resetZoom()">Reset zoom</md-button>
                <md-button md-no-ink class="md-primary" data-ng-click="openTagsFilterModal('')">Tag filter</md-button>
            </div>
        </div>
        <md-tabs md-selected="selectedIndex" class="metric-panels">
            <md-tab ng-repeat="tag in tags" ng-disabled="tag.disabled" data-ng-model="value" active="isActive(tag.text)"
                    ng-click="setSelectedIndex($index)" ui-sref="viewGraphs(tag.route)">
                <span>{{tag.text}}</span>
            </md-tab>
        </md-tabs>
    </div>
    <div gatling-details data-ng-if="gatlingDetails"></div>
    <!--<div data-ng-hide="gatlingDetails">-->
        <ul flex class="collapsible collapsible-accordion" data-collapsible="expandable">
            <li flex data-ng-repeat="metric in metrics | tagsFilter:'tags':value" data-ng-controller="HighchartsController">
                <div class="collapsible-header" data-ng-click="setMetricIsOpen($index)" ng-class="metric.isOpen ? 'active' : ''">
                    {{metric.alias}}
                </div>
                <div flex class="collapsible-body">
                    <!--<md-card md-padding>-->
                        <div layout="column" flex data-ng-init="initConfig(metric, $index)" ng-if="metric.isOpen">
                               <div layout="row">
                                   <md-button title="Edit metric" class="md-icon-button" aria-label="Edit metric" ng-click="editMetric(metric._id)">
                                       <md-icon md-svg-icon="images/assets/ic_settings_applications_black_36px.svg"></md-icon>
                                   </md-button>
                                   <md-button class="md-icon-button" aria-label="Edit tags" ng-click="setTags()">
                                       <md-icon md-svg-icon="images/assets/ic_local_offer_black_36px.svg"></md-icon>
                                   </md-button>
                                   <md-button class="md-icon-button" aria-label="Share URL" ng-click="setMetricShareUrl(metric._id)">
                                       <md-icon md-svg-icon="images/assets/ic_link_black_36px.svg"></md-icon>
                                   </md-button>
                                   <div layout-align="center">
                                       <input type="text" ng-readonly="true" ng-model="metricShareUrl" ng-if="showUrl" share-graph-url/>
                                       <!--<input ng-readonly="true" ng-model="metricShareUrl" ng-if="showUrl"  style="width:metric;" share-graph-url/>-->
                                   </div>
                                   <div>
                                       <md-button ng-if="showUrl && hasFlash()" tooltip-size="medium" title="Copy graph URL" tooltip-side="top" clip-copy="metricShareUrl" clip-click="clipClicked()">Copy</md-button>
                                   </div>
                                   <div flex  md-padding class="input-group" ng-if="showTags" style="width:30%">
                                       <tags-input  class="graph-input-tags" data-ng-model="metric.tags" on-tag-removed="tagRemoved($tag)">
                                           <auto-complete source="loadTags($query)" loadOnDownArrow="true"></auto-complete>
                                       </tags-input>
                                       <div class="input-group-btn">
                                           <md-button class="md-icon-button" aria-label="Tags OK" ng-click="updateTags()">
                                               <md-icon md-svg-icon="images/assets/ic_check_black_36px.svg"></md-icon>
                                           </md-button>
                                           <!--<md-button ng-click="updateTags()">-->
                                           <!--<span class="btn btn-xs glyphicon glyphicon-ok"></span>-->
                                           <!--</md-button>-->
                                       </div>
                                   </div>
                               </div>

                               <div  flex ng-attr-id="{{'chart-' + $index}}" config="config">
                               </div>
                        </div>
                    </div>
                 <!--</div>-->
              </li>
        </ul>
    </div>
        <!--<accordion close-others="false">-->
        <!--<div data-ng-repeat="metric in metrics | tagsFilter:'tags':value" data-ng-controller="HighchartsController">-->
            <!--<accordion-group is-open="metric.isOpen" class="graph-accordion-group">-->
                <!--<accordion-heading>-->
                    <!--<div>{{metric.alias}}</div>-->
                <!--</accordion-heading>-->
                <!--<div data-ng-init="initConfig(metric, $index)" ng-if="metric.isOpen">-->
                        <!--<span>-->
                            <!--<div class="btn-group">-->
                                <!--<label title="Edit metric" class="btn default" ng-click="editMetric(metric._id)"><span-->
                                        <!--class="btn btn-xs glyphicon glyphicon-wrench"></span></label>-->
                                <!--<label title="Edit tags" class="btn default" ng-click="setTags()"><span-->
                                        <!--class="btn btn-xs glyphicon glyphicon-tag"></span></label>-->
                                <!--<label title="Share URL" class="btn default"-->
                                       <!--ng-click="setMetricShareUrl(metric._id)"><span-->
                                        <!--class="btn btn-xs glyphicon glyphicon-share"></span></label>-->
                            <!--</div>-->
                        <!--</span>-->
                        <!--<span><input ng-readonly="true" ng-model="metricShareUrl" ng-if="showUrl" style="width:50%;"-->
                                     <!--share-graph-url/></span><span><button ng-if="showUrl && hasFlash()"-->
                                                                           <!--tooltip-size="medium" title="Copy graph URL"-->
                                                                           <!--tooltip-side="top" clip-copy="metricShareUrl"-->
                                                                           <!--clip-click="clipClicked()">Copy-->
                <!--</button></span>-->
                        <!--<span>-->
                              <!--<div class="input-group" ng-if="showTags" class="graph-input-tags">-->

                                  <!--<tags-input data-ng-model="metric.tags" on-tag-removed="tagRemoved($tag)">-->
                                      <!--<auto-complete source="loadTags($query)" loadOnDownArrow="true"></auto-complete>-->
                                  <!--</tags-input>-->
                                    <!--<span class="input-group-btn">-->
                                        <!--<button ng-click="updateTags()" class="btn btn-default" type="button"><span-->
                                                <!--class="btn btn-xs glyphicon glyphicon-ok"></button>-->
                                    <!--</span>-->
                              <!--</div>-->
                        <!--</span>-->

                    <!--<div ng-attr-id="{{'chart-' + $index}}" config="config"></div>-->
                <!--</div>-->
            <!--</accordion-group>-->
        <!--</div>-->
        <!--</accordion>-->
        <!--</li>-->
    <!--</div>-->
