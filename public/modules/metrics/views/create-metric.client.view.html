<div data-ng-controller="MetricsController" data-ng-init="initCreateForm()">
    <div class="page-header">
        <h1>New Metric</h1>
    </div>
    <div cg-busy="{promise:updateTestrun,message:'Updating test runs...'}"></div>
    <form name="metricForm" novalidate>
        <div layout="column">
            <md-input-container flex class="well">
                <label>Alias</label>
                <input ng-model="metric.alias">
            </md-input-container>
            <div layout="column" class="well">
                <div ng-repeat="target in metric.targets track by $index">
                    <div layout="row" layout-align="end center">
                        <md-input-container flex>
                            <label>Target</label>
                            <input ng-model="metric.targets[$index]">
                        </md-input-container>
                        <create-graphite-query target="metric.targets[$index]" query="'metric'"></create-graphite-query>
                        <!--<md-menu style="padding-top: 0px; padding-bottom: 0px;">-->
                            <!--<div aria-label="Select target" class="md-icon-button"-->
                                 <!--ng-click="openMenu($mdOpenMenu, $event, target)">-->
                                <!--<md-icon md-menu-origin md-svg-src="images/assets/ic_search_black_36px.svg"></md-icon>-->
                                <!--<md-tooltip>-->
                                    <!--Select target-->
                                <!--</md-tooltip>-->
                            <!--</div>-->
                            <!--<md-menu-content width="4" id="targets-menu-content">-->
                                <!--<md-menu-item ng-repeat="graphiteTarget in graphiteTargets">-->
                                    <!--<md-button md-menu-disable-close="md-menu-disable-close"  ng-click="getTargets(target, graphiteTarget.id, $parent.$index)">-->
                                        <!--{{graphiteTarget.text}}-->
                                    <!--</md-button>-->
                                <!--</md-menu-item>-->
                            <!--</md-menu-content>-->
                        <!--</md-menu>-->
                        <md-icon md-svg-src="images/assets/ic_clear_black_36px.svg" data-ng-click="removeTarget($index)"
                                 data-ng-show="metric.targets.length>1"></md-icon>
                    </div>
                </div>
                <div>
                    <md-button md-no-ink class="md-primary md-raised" data-ng-click="addTarget()">Add target</md-button>
                </div>
            </div>
            <md-input-container flex class="well">
                <!--<label>Alias</label>-->
                <tags-input data-ng-model="metric.tags">
                    <auto-complete source="loadTags($query)" loadOnDownArrow="true"></auto-complete>
                </tags-input>
            </md-input-container>
            <div layout="column" class="well">
                <md-checkbox ng-model="enableRequirement" aria-label="Requirements enabled">
                    Requirements enabled
                </md-checkbox>
                <div layout="row">
                    <md-input-container>
                        <label>Requirement</label>
                        <md-select ng-disabled="enableRequirement===false" ng-model="metric.requirementOperator">
                            <md-option value="<">
                                should be lower than
                            </md-option>
                            <md-option value=">">
                                should be higher than
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container flex>
                        <label>Value</label>
                        <input ng-model="metric.requirementValue" ng-disabled="enableRequirement===false">
                    </md-input-container>
                </div>
            </div>
            <div layout="column" class="well">
                <md-checkbox ng-model="enableBenchmarking" aria-label="Requirements enabled">
                    Benchmarking enabled
                </md-checkbox>
                <div layout="row">
                    <md-input-container>
                        <label>Benchmark</label>
                        <md-select ng-disabled="enableBenchmarking===false" ng-model="metric.benchmarkOperator">
                            <md-option value=">">
                                allow a positive deviation of
                            </md-option>
                            <md-option value="<">
                                allow a negative deviation of
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container flex>
                        <label>Value</label>
                        <input ng-model="metric.benchmarkValue" ng-disabled="enableBenchmarking===false">
                    </md-input-container>
                </div>
            </div>
            <div layout="row">
                <md-button md-no-ink class="md-primary" data-ng-click="create()">Submit</md-button>
                <md-button data-ng-click="cancel()">Cancel</md-button>
            </div>
        </div>
    </form>


    <!--<div class="col-md-12">-->
    <!--<form name="metricForm" class="form-horizontal"  novalidate>-->
    <!--<fieldset>-->
    <!--<div class="form-group well well-sm">-->
    <!--<label class="control-label" for="alias">Alias</label>-->
    <!--<div class="controls">-->
    <!--<input type="text" data-ng-model="metric.alias" id="alias" class="form-control" placeholder="Alias" required>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group well well-sm">-->
    <!--<label class="control-label" for="target" >Targets</label>-->
    <!--<div class="controls" ng-repeat="target in metric.targets track by $index">-->
    <!--<input class="metric-targets" type="text" id="target" data-ng-model="metric.targets[$index]" placeholder="Enter target" required>-->
    <!--<i class="pull-right glyphicon glyphicon-trash" data-ng-click="removeTarget($index)" data-ng-show="metric.targets.length>1"></i>-->
    <!--</div>-->
    <!--<button ng-click="addTarget()">Add target</button>-->
    <!--</div>-->
    <!--<div class="form-group well well-sm">-->
    <!--<label class="control-label">Tags</label>-->
    <!--<tags-input data-ng-model="metric.tags" >-->
    <!--<auto-complete source="loadTags($query)" loadOnDownArrow="true"></auto-complete>-->
    <!--</tags-input>-->
    <!--</div>-->
    <!--&lt;!&ndash;<div class="form-group well well-sm">&ndash;&gt;-->
    <!--&lt;!&ndash;<label class="control-label" for="type">Type</label>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="controls">&ndash;&gt;-->
    <!--&lt;!&ndash;<select id="type" data-ng-model="metric.type" placeholder="Select type" required>&ndash;&gt;-->
    <!--&lt;!&ndash;<option data-ng-repeat="type in metricTypes" value="{{type}}">{{type}}</option>&ndash;&gt;-->
    <!--&lt;!&ndash;</select>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--<div class="form-group well well-sm">-->
    <!--<div class="col-lg-3">-->
    <!--<label>Requirement {{enableRequirement}}</label><br/>-->
    <!--<label class="switch switch-success"><input type="checkbox" ng-model="enableRequirement"  ng-true-value="'enabled'" ng-false-value="'disabled'"><i></i></label>-->
    <!--<hr>-->
    <!--</div>-->
    <!--<div class="col-lg-9">-->
    <!--<label ng-disabled="enableRequirement==='disabled'" class="control-label" for="requirementOperator">Should be</label>-->
    <!--<div class="controls">-->
    <!--<select ng-disabled="enableRequirement==='disabled'" id="requirementOperator" data-ng-model="metric.requirementOperator">-->
    <!--<option data-ng-repeat="operator in operatorOptions" value="{{operator.value}}">{{operator.alias}}</option>-->
    <!--</select>-->
    <!--<input ng-disabled="enableRequirement==='disabled'" type="text" id="requirementValue" data-ng-model="metric.requirementValue" placeholder="Enter value" >-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group form-horizontal well well-sm">-->
    <!--<div class="col-lg-3">-->
    <!--<label>Benchmarking {{enableBenchmarking}}</label><br/>-->
    <!--<label class="switch switch-success"><input type="checkbox" ng-model="enableBenchmarking"  ng-true-value="'enabled'" ng-false-value="'disabled'"><i></i></label>-->
    <!--<hr>-->
    <!--</div>-->
    <!--<div class="col-lg-9">-->
    <!--<label ng-disabled="enableBenchmarking==='disabled'" class="control-label" for="benchmarkOperator">Allow a </label>-->
    <!--<div class="controls">-->
    <!--<select ng-disabled="enableBenchmarking==='disabled'" id="benchmarkOperator" data-ng-model="metric.benchmarkOperator" data-ng-init="options[0]">-->
    <!--<option data-ng-repeat="deviation in deviationOptions" value="{{deviation.value}}">{{deviation.alias}}</option>-->
    <!--</select>-->
    <!--</div>-->
    <!--<label ng-disabled="enableBenchmarking==='disabled'" class="control-label" for="benchmarkOperator">of </label>-->
    <!--<div class="controls">-->
    <!--<input ng-disabled="enableBenchmarking==='disabled'" id="benchmarkValue" data-ng-model="metric.benchmarkValue" placeholder="Enter value">-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>    -->
    <!--<div class="form-group well well-sm">-->
    <!--<button class="btn-primary" data-ng-click="create()" ng-disabled="metricForm.$invalid">Submit</button>-->
    <!--<button class="btn-primary" data-ng-click="cancel()">Cancel</button>-->
    <!--</div>-->
    <!--&lt;!&ndash;<p>Metric: {{metric}}</p>&ndash;&gt;-->
    <!--<div data-ng-show="error" class="text-danger">-->
    <!--<strong data-ng-bind="error"></strong>-->
    <!--</div>-->
    <!--</fieldset>-->
    <!--</form>-->
    <!--</div>-->
</div>

